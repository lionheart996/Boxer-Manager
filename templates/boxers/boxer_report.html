{% extends "base.html" %}
{% block content %}
<h2 class="page-title">ğŸ“Š {{ boxer.name }} â€” Report</h2>

<div class="content-container">

  <!-- Navigation buttons -->
  <div class="nav-buttons" style="display:flex; flex-wrap:wrap; gap:8px; margin-bottom:1rem;">
    {% if boxer.uuid %}
      <a class="btn" href="{% url 'boxer_tests' uuid=boxer.uuid %}">Tests</a>
    {% else %}
      <a class="btn" href="{% url 'boxer_tests_pk' pk=boxer.id %}">Tests</a>
    {% endif %}
    <a class="btn" href="{% url 'boxer_classes' boxer.id %}">Classes</a>
    <a class="btn" href="{% url 'weight_progress' boxer.id %}">Weight Progress</a>
    <a class="btn " href="{% url 'boxer_resume' boxer.id %}">Resume</a>

  </div>

  <!-- Summary -->
  {% if att_total %}
    <div class="report-summary">
      <p><strong>{{ boxer.name }}</strong> has been
        <span class="highlight">{{ att_present }}</span> times present
        ({{ att_present }} / {{ att_total }} = <span class="highlight">{{ att_present_pct }}%</span>).
      </p>
      <p>
        Absent: <span class="highlight">{{ att_absent }}</span>
        ({{ att_absent_pct }}%). Of these,
        <span class="highlight">{{ att_excused }}</span> were excused
        ({{ att_excused_pct_of_abs }}%).
      </p>
    </div>
  {% else %}
    <p><em>No attendance recorded yet for {{ boxer.name }}.</em></p>
  {% endif %}

  <!-- Daily Attendance -->
  <h3 style="margin-top:1.5rem;">Daily Attendance</h3>
  {% if attendance %}
    <div class="attendance-cards">
      {% for a in attendance %}
      <div class="att-card">
        <div class="att-date">{{ a.date|date:"Y-m-d" }}</div>
        <div class="att-status
          {% if a.is_present %}present
          {% elif a.is_excused %}excused
          {% else %}absent{% endif %}">
          {% if a.is_present %}âœ… Present
          {% elif a.is_excused %}ğŸŸ¡ Excused
          {% else %}âŒ Absent
          {% endif %}
        </div>
        <div class="att-weight">
          {% if a.weight_kg %}
            âš–ï¸ {{ a.weight_kg|floatformat:2 }} kg
          {% else %}
            â€“
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
  {% else %}
    <p><em>No daily attendance for this boxer.</em></p>
  {% endif %}
</div>

<style>
/* Summary block */
.report-summary {
  background: linear-gradient(145deg, #0e0e0e, #181818);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 14px;
  margin-bottom: 1rem;
  box-shadow: 0 0 10px rgba(0,255,102,0.2);
}
.report-summary p { margin: .3rem 0; }
.report-summary .highlight { color: var(--brand); font-weight: 700; }

/* Attendance cards */
.attendance-cards { display:grid; gap:12px; margin-top:12px; }
.att-card {
  background: var(--panel-2);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
  display:flex; justify-content:space-between; align-items:center;
  box-shadow: inset 0 0 8px rgba(0,255,102,0.1);
}
.att-date { font-weight:700; }
.att-status { font-weight:600; }
.att-status.present { color: #00ff66; }
.att-status.excused { color: #ffcc00; }
.att-status.absent { color: #ff3333; }
.att-weight { font-size:14px; color: var(--muted); }
</style>
{% endblock %}

