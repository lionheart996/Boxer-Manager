{% extends "base.html" %}
{% block content %}
<h2 class="page-title">Boxers</h2>

<div class="content-container">

  <!-- Search -->
  <form method="get" style="display:flex; gap:8px; align-items:center; margin-bottom:12px; flex-wrap:wrap;">
    <input type="search"
           name="q"
           value="{{ q }}"
           placeholder="Search by name or parent"
           style="padding:6px 10px; min-width:240px;">
    <button class="btn" type="submit">Search</button>
    {% if q %}
      <a class="btn" href="{% url 'boxer_list' %}">Clear</a>
    {% endif %}
    <span style="opacity:.7; margin-left:8px;">{{ result_count }} result{{ result_count|pluralize }}</span>
  </form>

  {% if boxers %}
    <div class="boxer-list">
      {% for b in boxers %}
      <section class="boxer-card">
        <header class="boxer-card__head">
          <h3 class="boxer-card__name">{{ b.name }}</h3>
        </header>

        <div class="boxer-card__actions">
          <a class="btn btn--sm" href="{% url 'boxer_report' b.id %}">Report</a>
          <a class="btn btn--sm" href="{% url 'boxer_resume' b.id %}">Resume</a>
          <form method="post"
                action="{% url 'delete_boxer' b.pk %}"
                style="display:inline"
                onsubmit="return confirm('Delete {{ b.name }}?');">
            {% csrf_token %}
            <button type="submit" class="btn btn--danger btn--sm">Delete</button>
          </form>
        </div>
      </section>
      {% endfor %}
    </div>

    {% if is_paginated %}
      <div style="margin-top:10px; display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
        {% if page_obj.has_previous %}
          <a class="btn" href="?q={{ q }}&page={{ page_obj.previous_page_number }}">← Prev</a>
        {% endif %}
        <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
          <a class="btn" href="?q={{ q }}&page={{ page_obj.next_page_number }}">Next →</a>
        {% endif %}
      </div>
    {% endif %}

  {% else %}
    {% if q %}
      <p>No boxers match “{{ q }}”.</p>
    {% else %}
      <p>No boxers yet.</p>
    {% endif %}
  {% endif %}

</div>

<style>
/* === Boxer list cards === */
.boxer-list{ display:grid; gap:12px; margin-top:12px; }
.boxer-card{
  background: var(--panel-2);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
  display: grid; gap: 8px;
}
.boxer-card__head{ display:flex; justify-content:space-between; align-items:center; }
.boxer-card__name{ margin:0; font-size:16px; font-weight:700; }
.boxer-card__actions{
  display:flex; flex-wrap:wrap; gap:8px;
}
</style>
{% endblock %}

